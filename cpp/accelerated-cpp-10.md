# Chapter 10

## 10.1

#### 포인터

- 객체의 주소를 나타내는 값
- 포인터를 초기화하는 값은 0인데, 어떤 객체 포인터와도 중복되지 않기 때문이다.
- 주소 연산자 `&x` (참조 타입에서 쓰는 `&`와는 다름), 역참조 연산자 `*`, T 타입의 포인터 타입 `T*`

아래의 세 코드는 모두 같은 의미이다.

```cpp
/* 두 실행문은 같은 의미 */
int* p, q; // p만 포인터, q는 int 타입
int *p, q;
int (*p), q; // (*p)와 q는 같은 타입
```

#### 함수 포인터

- 함수를 인수로 사용할 때 컴파일러는 함수 호출을 함수 포인터를 사용하도록 변환한다.
- 함수 포인터를 역참조해서 할 수 있는 일은, (1) 해당 함수를 호출하거나 (2) 다시 함수의 주소를 얻는 것 뿐이다.
- 포인터를 명시적으로 역참조(`*`)하지 않아도 함수를 호출할 수 있다.
- 호출을 제외한 함수 사용에서는 `&`를 명시하지 않더라도 해당 함수의 주소를 얻는 것으로 간주한다.

```cpp
int next(int n) {
  return n + 1;
}

int (*fp)(int); // fp는 (int를 인수로 받아 int를 반환하는) 함수의 포인터

/* 두 실행문은 같은 의미 */
fp = &next;
fp = next;

/* 두 실행문은 같은 의미 */
i = (*fp)(i);
i = fp(i);
```

함수를 매개변수로 사용하면, 컴파일러는 해당 매개변수를 함수 포인터로 자동 변환한다.

```cpp
/* 두 실행문은 같은 의미 */
int foo(double bar(int));
int foo(double (*bar)(int));
```

함수를 반환 값으로 사용할 때는 반환 값이 함수 포인터임을 명시해야 한다. 자동 변환이 적용되지 않기 때문이다. 현실에서는 함수 포인터를 반환하는 함수는 거의 없다.

```cpp
// foo_fp라는 함수 포인터 타입 정의
typedef int (*foo_fp)(int);
foo_fp get_foo_ptr();

// 위와 같은 의미
int (*get_foo_ptr())(int);
```

#### 배열

- 배열의 개수는 컴파일 과정에서 결정된다. 동적으로 확장 또는 축소할 수 없다.
- 배열은 클래스가 아니므로 멤버가 없다. `size_type` 멤버도 없다. `<cstddef>` 헤더는 unsigned 타입 `size_t`를 정의한다.
- 배열 이름을 값으로 사용하면 해당 이름은 배열의 첫 번째 요소를 가리키는 포인터이다.

```cpp
// 예제: 물리적 공간에서 점으로 차원 나타내기
const size_t NDim = 3;
double coords[NDim];
*coords = 1.5;
```

#### 포인터

임의 접근 반복자

```cpp
// 초깃값을 할당하면 배열의 크기를 명시하지 않아도 된다.
const int numbers[] = { 1, 2, 3, 4, 5 };

// a가 x번째 요소를 가리키는 포인터라면, a[y] x + y번째 요소이다.
numbers[3];
*(numbers + 3);
```

- `p`와 `q`가 같은 배열의 포인터라면, `p - q`는 요소 사이의 거리이다.
  - `p - q`는 음수일 수 있으므로 부호가 있는 타입이다.
  - `<cstddef>` 헤더에 `ptrdiff_t` 타입이 정의되어 있다. `long`인지 `int`인지는 구현체에 따라 다르다.

## 10.2

#### 문자열 리터럴

리터럴의 문자 개수보다 요소가 하나 더 많은 `const char` 타입의 배열. 컴파일러가 마지막에 null 문자(`'\0'`)를 자동으로 추가하는데, 리터럴의 첫 주소만 알아도 끝이 어딘지를 알 수 있게 해준다.

```cpp
#include <string>
#include <cstring> // strlen()
const char bye[] = { 'B', 'y', 'e', '\0' };
string s(bye);
string s("Bye");
string s(bye, bye + strlen(bye));
```

## 나의 질문들

Q. 함수 포인터 리턴값은 함수 포인터로 자동 변환되지 않는다면, 어떤 일 발생?
